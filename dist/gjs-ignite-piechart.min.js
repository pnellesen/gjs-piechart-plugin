/*! gjs-ignite-piechart - 0.1.67 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("grapesjs")):"function"==typeof define&&define.amd?define(["grapesjs"],e):"object"==typeof exports?exports["gjs-ignite-piechart"]=e(require("grapesjs")):t["gjs-ignite-piechart"]=e(t.grapesjs)}(window,function(t){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)r.d(n,a,function(e){return t[e]}.bind(null,a));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},a=l(r(1)),o=l(r(2)),i=l(r(3));function l(t){return t&&t.__esModule?t:{default:t}}e.default=a.default.plugins.add("gjs-ignite-piechart",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n({},e);console.log("option data? ",e),(0,i.default)(t,r),(0,o.default)(t,r)})},function(e,r){e.exports=t},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t};function a(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.DomComponents,o=r.getType("default"),i=o.model,l=e.optChartData||[{name:"defaultName",label:"No data",data:1,color:"#ccc"}],u={},c={};l.map(function(t){u["color"+t.name]=t.color,c["data"+t.name]=t.data});var s=l.map(function(t){return{name:"color"+t.name,label:t.label,changeProp:1,type:"color"}}),d=l.map(function(t){return{name:"data"+t.name,label:t.label,changeProp:1,type:"number"}});r.addType("piechart",{model:i.extend({defaults:n({},i.prototype.defaults,{"custom-name":e.labelBurger,draggable:!0,droppable:!0,copyable:!0,removable:!0,resizable:!0},u,c,{blnInitChart:!0,traits:[].concat(a(s),a(d)),strColorData:Object.keys(u).map(function(t){return u[t]}),strValData:Object.keys(c).map(function(t){return c[t]}),strLabelData:Object.keys(l).map(function(t){return l[t].label}),script:function(){var t=document.getElementById("newPieChart").getContext("2d"),e="{[ strColorData ]}".split(","),r="{[ strValData ]}".split(","),n="{[ strLabelData ]}".split(",");console.log("blnInitChart: ","{[ blnInitChart ]}"),console.log("Initialize Chart");var a=new Chart(t,{type:"pie",data:{labels:n,datasets:[{backgroundColor:e,data:r}]}});this.newPieChart=a}})},{isComponent:function(t){if(t.getAttribute&&"piechart"==t.getAttribute("data-gjs-type"))return{type:"piechart"}}}),view:o.view.extend({init:function(){var t=Object.keys(u).map(function(t){return"change:"+t}).join(" "),e=Object.keys(c).map(function(t){return"change:"+t}).join(" ");this.listenTo(this.model,t,function(){return this.updateChart("color")}),this.listenTo(this.model,e,function(){return this.updateChart("data")})},updateChart:function(t){var e=this;if(console.log("update chart - blnInitChart? ",this.model.attributes.blnInitChart),this.model.attributes.blnInitChart&&(this.model.attributes.blnInitChart=!1),"color"===t){var r=s.map(function(t){return e.model.attributes[t.name]});this.model.attributes.strColorData=r}else{var n=d.map(function(t){return e.model.attributes[t.name]});this.model.attributes.strValData=n}this.updateScript()}})})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=t.BlockManager;console.log("blocks.js - BlockManager - getAll before: ",e.getAll()),e.add("piechart",{label:"Pie Chart",content:'<div class="chart" style="width:500px;height:800px;border:1px solid #000">\n      <h2>Pie chart here</h2>\n      <canvas data-gjs-type="piechart"  id="newPieChart" height="250" width="400"></canvas>\n  </div>',category:"Extra"})}}])});
//# sourceMappingURL=gjs-ignite-piechart.min.js.map