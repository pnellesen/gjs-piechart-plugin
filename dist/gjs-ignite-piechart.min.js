/*! gjs-ignite-piechart - 0.1.74 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("grapesjs")):"function"==typeof define&&define.amd?define(["grapesjs"],e):"object"==typeof exports?exports["gjs-ignite-piechart"]=e(require("grapesjs")):t["gjs-ignite-piechart"]=e(t.grapesjs)}(window,function(t){return function(t){var e={};function r(a){if(e[a])return e[a].exports;var n=e[a]={i:a,l:!1,exports:{}};return t[a].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=t,r.c=e,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},n=l(r(1)),o=l(r(2)),i=l(r(3));function l(t){return t&&t.__esModule?t:{default:t}}e.default=n.default.plugins.add("gjs-ignite-piechart",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a({},e);console.log("option data? ",e),(0,i.default)(t,r),(0,o.default)(t,r)})},function(e,r){e.exports=t},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t};function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.DomComponents,o=r.getType("default"),i=o.model,l=e.optChartData||[{name:"defaultName",label:"No data",data:1,color:"#ccc"}],u={},c={};l.map(function(t){u["color"+t.name]=t.color,c["data"+t.name]=t.data});var s=l.map(function(t){return{name:"color"+t.name,label:t.label,changeProp:1,type:"color"}}),p=l.map(function(t){return{name:"data"+t.name,label:t.label,changeProp:1,type:"number"}});r.addType("piechart",{model:i.extend({defaults:a({},i.prototype.defaults,{"custom-name":e.labelBurger,draggable:!0,droppable:!0,copyable:!0,removable:!0,resizable:!0},u,c,{traits:[].concat(n(s),n(p)),strColorData:Object.keys(u).map(function(t){return u[t]}),strValData:Object.keys(c).map(function(t){return c[t]}),strLabelData:Object.keys(l).map(function(t){return l[t].label}),script:function(){console.log("Initialize piechart. chartEl?: ",this);var t=this.getContext("2d");console.log("ctx: ",t);var e="{[ strColorData ]}".split(","),r="{[ strValData ]}".split(","),a="{[ strLabelData ]}".split(",");if(this.newPieChart)console.log("We have pieChart: do update"),this.newPieChart.data.datasets=[{backgroundColor:e,data:r}],this.newPieChart.update({duration:0});else{console.log("Initialize piechart. chartEl?: ",this);var n=new Chart(t,{responsive:!0,maintainAspectRatio:!0,type:"pie",data:{labels:a,datasets:[{backgroundColor:e,data:r}]}});this.newPieChart=n}}})},{isComponent:function(t){if(t.getAttribute&&"piechart"==t.getAttribute("data-gjs-type"))return{type:"piechart"}}}),view:o.view.extend({init:function(){var t=Object.keys(u).map(function(t){return"change:"+t}).join(" "),e=Object.keys(c).map(function(t){return"change:"+t}).join(" ");this.listenTo(this.model,t,function(){return this.updateChart("color")}),this.listenTo(this.model,e,function(){return this.updateChart("data")})},updateChart:function(t){var e=this;if("color"===t){var r=s.map(function(t){return e.model.attributes[t.name]});this.model.attributes.strColorData=r}else{var a=p.map(function(t){return e.model.attributes[t.name]});this.model.attributes.strValData=a}this.updateScript()}})})}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];var e=t.BlockManager;console.log("blocks.js - BlockManager - getAll before: ",e.getAll()),e.add("piechart",{label:"Pie Chart",content:'<div class="chart-container" style="position: relative;height:300px;width:500px"><canvas data-gjs-type="piechart"></canvas></div>',category:"Extra"})}}])});
//# sourceMappingURL=gjs-ignite-piechart.min.js.map